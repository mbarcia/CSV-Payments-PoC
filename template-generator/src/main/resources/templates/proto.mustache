syntax = "proto3";

option java_package = "{{basePackage}}.grpc";

message {{inputTypeName}} {
{{#inputFields}}
  {{protoType}} {{name}} = {{#indexPlusOne @index}}1{{/indexPlusOne}};
{{/inputFields}}
}

message {{outputTypeName}} {
{{#outputFields}}
  {{protoType}} {{name}} = {{#indexPlusOne @index}}{{#inputFields.length}}{{/inputFields.length}}{{^inputFields.length}}1{{/inputFields.length}}{{/indexPlusOne}};
{{/outputFields}}
}

service Process{{serviceNameFormatted}}Service {
{{#isExpansion}}
  rpc remoteProcess({{inputTypeName}}) returns (stream {{outputTypeName}});
{{/isExpansion}}
{{#isReduction}}
  rpc remoteProcess(stream {{inputTypeName}}) returns ({{outputTypeName}});
{{/isReduction}}
{{^isExpansion}}
{{^isReduction}}
  rpc remoteProcess({{inputTypeName}}) returns ({{outputTypeName}});
{{/isReduction}}
{{/isExpansion}}
}
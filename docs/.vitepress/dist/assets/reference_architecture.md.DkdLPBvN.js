/*
 * Copyright (c) 2023-2025 Mariano Barcia
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import{_ as d,C as c,c as u,o as i,a2 as p,b as s,j as n,w as a,a as t,G as o,a3 as l}from"./chunks/framework.BoyqnxIq.js";const C=JSON.parse('{"title":"Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"reference/architecture.md","filePath":"reference/architecture.md"}'),m={name:"reference/architecture.md"};function h(g,e,f,b,A,D){const r=c("Mermaid");return i(),u("div",null,[e[7]||(e[7]=p('<h1 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h1><p>The Pipeline Framework is designed as a modular, extensible system for building reactive pipeline processing applications. Understanding its architecture is key to leveraging its full potential.</p><h2 id="core-concepts" tabindex="-1">Core Concepts <a class="header-anchor" href="#core-concepts" aria-label="Permalink to &quot;Core Concepts&quot;">​</a></h2><h3 id="pipeline" tabindex="-1">Pipeline <a class="header-anchor" href="#pipeline" aria-label="Permalink to &quot;Pipeline&quot;">​</a></h3><p>A pipeline is a sequence of processing steps that transform input data into output data. Each step in the pipeline performs a specific transformation or operation on the data flowing through it.</p>',5)),(i(),s(l,null,{default:a(()=>[o(r,{id:"mermaid-15",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5BInput%20Data%5D%20--%3E%20B%5BPipeline%20Step%201%5D%0A%20%20%20%20B%20--%3E%20C%5BPipeline%20Step%202%5D%0A%20%20%20%20C%20--%3E%20D%5BPipeline%20Step%203%5D%0A%20%20%20%20D%20--%3E%20E%5BOutput%20Data%5D%0A%20%20%20%20B%20--%3E%20F%5BError%20Handler%5D%0A%20%20%20%20C%20--%3E%20G%5BError%20Handler%5D%0A%20%20%20%20D%20--%3E%20H%5BError%20Handler%5D%0A%20%20%20%20F%20--%3E%20I%5BDLQ%5D%0A%20%20%20%20G%20--%3E%20I%0A%20%20%20%20H%20--%3E%20I%0A"})]),fallback:a(()=>[...e[0]||(e[0]=[t(" Loading... ",-1)])]),_:1})),e[8]||(e[8]=p('<h3 id="step" tabindex="-1">Step <a class="header-anchor" href="#step" aria-label="Permalink to &quot;Step&quot;">​</a></h3><p>A step is a single processing unit within a pipeline. Steps can have different patterns:</p><ul><li><strong>One-to-One</strong>: Transforms a single input into a single output</li><li><strong>One-to-Many</strong>: Transforms a single input into multiple outputs</li><li><strong>Many-to-One</strong>: Aggregates multiple inputs into a single output</li><li><strong>Many-to-Many</strong>: Transforms multiple inputs into multiple outputs</li><li><strong>Side Effect</strong>: Performs an operation without changing the data flow</li></ul>',3)),(i(),s(l,null,{default:a(()=>[o(r,{id:"mermaid-49",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20subgraph%20%22Step%20Patterns%22%0A%20%20%20%20%20%20%20%20A%5BOne-to-One%5D%20--%3E%20B%5B1%20Input%20%E2%86%92%201%20Output%5D%0A%20%20%20%20%20%20%20%20C%5BOne-to-Many%5D%20--%3E%20D%5B1%20Input%20%E2%86%92%20N%20Outputs%5D%0A%20%20%20%20%20%20%20%20E%5BMany-to-One%5D%20--%3E%20F%5BN%20Inputs%20%E2%86%92%201%20Output%5D%0A%20%20%20%20%20%20%20%20G%5BMany-to-Many%5D%20--%3E%20H%5BN%20Inputs%20%E2%86%92%20M%20Outputs%5D%0A%20%20%20%20end%0A"})]),fallback:a(()=>[...e[1]||(e[1]=[t(" Loading... ",-1)])]),_:1})),e[9]||(e[9]=p('<h3 id="mapper" tabindex="-1">Mapper <a class="header-anchor" href="#mapper" aria-label="Permalink to &quot;Mapper&quot;">​</a></h3><p>Mappers handle the conversion between different data representations:</p><ul><li><strong>gRPC objects</strong>: Protocol buffer generated classes</li><li><strong>Domain objects</strong>: Business logic entities</li><li><strong>DTO objects</strong>: Data transfer objects</li></ul><h3 id="adapter" tabindex="-1">Adapter <a class="header-anchor" href="#adapter" aria-label="Permalink to &quot;Adapter&quot;">​</a></h3><p>Adapters bridge the gap between the pipeline framework and external systems, handling protocol-specific details like gRPC or REST communication.</p><h2 id="system-architecture" tabindex="-1">System Architecture <a class="header-anchor" href="#system-architecture" aria-label="Permalink to &quot;System Architecture&quot;">​</a></h2><h3 id="runtime-and-deployment-modules" tabindex="-1">Runtime and Deployment Modules <a class="header-anchor" href="#runtime-and-deployment-modules" aria-label="Permalink to &quot;Runtime and Deployment Modules&quot;">​</a></h3>',7)),(i(),s(l,null,{default:a(()=>[o(r,{id:"mermaid-85",class:"mermaid",graph:"graph%20LR%0A%20%20%20%20subgraph%20%22Pipeline%20Framework%22%0A%20%20%20%20%20%20%20%20A%5BRuntime%20Module%5D%0A%20%20%20%20%20%20%20%20B%5BDeployment%20Module%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20A%20--%3E%20C%5BApplication%20Code%5D%0A%20%20%20%20B%20--%3E%20D%5BAnnotation%20Processing%5D%0A%20%20%20%20C%20--%3E%20E%5BGenerated%20Pipeline%20Apps%5D%0A"})]),fallback:a(()=>[...e[2]||(e[2]=[t(" Loading... ",-1)])]),_:1})),e[10]||(e[10]=p('<h3 id="runtime-module" tabindex="-1">Runtime Module <a class="header-anchor" href="#runtime-module" aria-label="Permalink to &quot;Runtime Module&quot;">​</a></h3><p>The runtime module contains the core framework components:</p><ul><li><strong>Annotations</strong>: <code>@PipelineStep</code> for declarative configuration</li><li><strong>Interfaces</strong>: Step interfaces (<code>StepOneToOne</code>, <code>StepOneToMany</code>, etc.)</li><li><strong>Base Classes</strong>: Abstract implementations and utilities</li><li><strong>Configuration</strong>: <code>StepConfig</code>, <code>PipelineConfig</code> for runtime behavior</li><li><strong>Mappers</strong>: <code>Mapper</code> interface and implementations</li><li><strong>Persistence</strong>: <code>PersistenceManager</code> for entity persistence</li></ul>',3)),(i(),s(l,null,{default:a(()=>[o(r,{id:"mermaid-124",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20subgraph%20%22Runtime%20Module%22%0A%20%20%20%20%20%20%20%20A%5BAnnotations%5D%0A%20%20%20%20%20%20%20%20B%5BInterfaces%5D%0A%20%20%20%20%20%20%20%20C%5BBase%20Classes%5D%0A%20%20%20%20%20%20%20%20D%5BConfiguration%5D%0A%20%20%20%20%20%20%20%20E%5BMappers%5D%0A%20%20%20%20%20%20%20%20F%5BPersistence%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A%20%20%20%20C%20--%3E%20D%0A%20%20%20%20D%20--%3E%20E%0A%20%20%20%20E%20--%3E%20F%0A"})]),fallback:a(()=>[...e[3]||(e[3]=[t(" Loading... ",-1)])]),_:1})),e[11]||(e[11]=p('<h3 id="deployment-module" tabindex="-1">Deployment Module <a class="header-anchor" href="#deployment-module" aria-label="Permalink to &quot;Deployment Module&quot;">​</a></h3><p>The deployment module contains build-time processors:</p><ul><li><strong>Annotation Processor</strong>: Scans for <code>@PipelineStep</code> annotations</li><li><strong>Code Generation</strong>: Automatically generates gRPC and REST adapters</li><li><strong>Dependency Injection</strong>: Registers generated beans with the DI container</li></ul>',3)),(i(),s(l,null,{default:a(()=>[o(r,{id:"mermaid-148",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20subgraph%20%22Deployment%20Module%22%0A%20%20%20%20%20%20%20%20A%5BAnnotation%20Processor%5D%0A%20%20%20%20%20%20%20%20B%5BCode%20Generator%5D%0A%20%20%20%20%20%20%20%20C%5BDI%20Registration%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20A%20--%3E%20B%0A%20%20%20%20B%20--%3E%20C%0A"})]),fallback:a(()=>[...e[4]||(e[4]=[t(" Loading... ",-1)])]),_:1})),e[12]||(e[12]=n("h2",{id:"data-flow-patterns",tabindex:"-1"},[t("Data Flow Patterns "),n("a",{class:"header-anchor",href:"#data-flow-patterns","aria-label":'Permalink to "Data Flow Patterns"'},"​")],-1)),e[13]||(e[13]=n("h3",{id:"reactive-streams",tabindex:"-1"},[t("Reactive Streams "),n("a",{class:"header-anchor",href:"#reactive-streams","aria-label":'Permalink to "Reactive Streams"'},"​")],-1)),e[14]||(e[14]=n("p",null,[t("The framework is built on Mutiny reactive streams, supporting both "),n("code",null,"Uni"),t(" (single item) and "),n("code",null,"Multi"),t(" (multiple items) patterns.")],-1)),(i(),s(l,null,{default:a(()=>[o(r,{id:"mermaid-158",class:"mermaid",graph:"graph%20LR%0A%20%20%20%20A%5BInput%20Uni%2FMulti%5D%20--%3E%20B%5BStep%201%5D%0A%20%20%20%20B%20--%3E%20C%5BStep%202%5D%0A%20%20%20%20C%20--%3E%20D%5BStep%203%5D%0A%20%20%20%20D%20--%3E%20E%5BOutput%20Uni%2FMulti%5D%0A"})]),fallback:a(()=>[...e[5]||(e[5]=[t(" Loading... ",-1)])]),_:1})),e[15]||(e[15]=n("h3",{id:"error-handling",tabindex:"-1"},[t("Error Handling "),n("a",{class:"header-anchor",href:"#error-handling","aria-label":'Permalink to "Error Handling"'},"​")],-1)),e[16]||(e[16]=n("p",null,"Each step includes built-in error handling with configurable retry policies, circuit breakers, and dead letter queues.",-1)),(i(),s(l,null,{default:a(()=>[o(r,{id:"mermaid-165",class:"mermaid",graph:"graph%20TD%0A%20%20%20%20A%5BPipeline%5D%20--%3E%20B%5BStep%201%5D%0A%20%20%20%20B%20--%3E%20C%7BSuccess%3F%7D%0A%20%20%20%20C%20--%3E%7CYes%7C%20D%5BNext%20Step%5D%0A%20%20%20%20C%20--%3E%7CNo%7C%20E%5BRetry%20Policy%5D%0A%20%20%20%20E%20--%3E%20F%7BRetry%20Limit%20Reached%3F%7D%0A%20%20%20%20F%20--%3E%7CNo%7C%20B%0A%20%20%20%20F%20--%3E%7CYes%7C%20G%5BDLQ%5D%0A"})]),fallback:a(()=>[...e[6]||(e[6]=[t(" Loading... ",-1)])]),_:1})),e[17]||(e[17]=p(`<h3 id="concurrency" tabindex="-1">Concurrency <a class="header-anchor" href="#concurrency" aria-label="Permalink to &quot;Concurrency&quot;">​</a></h3><p>Steps can be configured to run with different concurrency models, including virtual threads for high-throughput scenarios.</p><h2 id="module-structure" tabindex="-1">Module Structure <a class="header-anchor" href="#module-structure" aria-label="Permalink to &quot;Module Structure&quot;">​</a></h2><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pipeline-framework/</span></span>
<span class="line"><span>├── runtime/                 # Core framework components</span></span>
<span class="line"><span>│   ├── src/main/java/</span></span>
<span class="line"><span>│   │   └── io/github/mbarcia/pipeline/</span></span>
<span class="line"><span>│   │       ├── annotation/    # Framework annotations</span></span>
<span class="line"><span>│   │       ├── config/         # Configuration classes</span></span>
<span class="line"><span>│   │       ├── mapper/        # Mapper interfaces</span></span>
<span class="line"><span>│   │       ├── persistence/   # Persistence utilities</span></span>
<span class="line"><span>│   │       ├── service/       # Service interfaces</span></span>
<span class="line"><span>│   │       ├── step/          # Step interfaces and base classes</span></span>
<span class="line"><span>│   │       └── GenericGrpcReactiveServiceAdapter.java</span></span>
<span class="line"><span>│   └── pom.xml</span></span>
<span class="line"><span>├── deployment/              # Build-time processors (used with provided scope)</span></span>
<span class="line"><span>│   ├── src/main/java/</span></span>
<span class="line"><span>│   │   └── io/github/mbarcia/pipeline/processor/</span></span>
<span class="line"><span>│   │       └── PipelineProcessor.java</span></span>
<span class="line"><span>│   └── pom.xml</span></span>
<span class="line"><span>└── pom.xml</span></span></code></pre></div><p>Note that the deployment module is typically used with <code>provided</code> scope in application POMs since it&#39;s only needed at build time for annotation processing.</p><h2 id="integration-patterns" tabindex="-1">Integration Patterns <a class="header-anchor" href="#integration-patterns" aria-label="Permalink to &quot;Integration Patterns&quot;">​</a></h2><h3 id="grpc-integration" tabindex="-1">gRPC Integration <a class="header-anchor" href="#grpc-integration" aria-label="Permalink to &quot;gRPC Integration&quot;">​</a></h3><p>The framework automatically generates gRPC adapters for pipeline steps, enabling seamless integration with gRPC-based services.</p><h3 id="rest-integration" tabindex="-1">REST Integration <a class="header-anchor" href="#rest-integration" aria-label="Permalink to &quot;REST Integration&quot;">​</a></h3><p>REST adapters can be generated to expose pipeline steps as HTTP endpoints.</p><h3 id="database-integration" tabindex="-1">Database Integration <a class="header-anchor" href="#database-integration" aria-label="Permalink to &quot;Database Integration&quot;">​</a></h3><p>Built-in persistence support allows steps to automatically persist entities before processing.</p><h2 id="configuration-model" tabindex="-1">Configuration Model <a class="header-anchor" href="#configuration-model" aria-label="Permalink to &quot;Configuration Model&quot;">​</a></h2><h3 id="step-level-configuration" tabindex="-1">Step-Level Configuration <a class="header-anchor" href="#step-level-configuration" aria-label="Permalink to &quot;Step-Level Configuration&quot;">​</a></h3><p>Each step can be independently configured with:</p><ul><li>Retry policies (limit, wait time, backoff)</li><li>Concurrency settings</li><li>Debugging options</li><li>Persistence behavior</li><li>Error recovery strategies</li></ul><h3 id="pipeline-level-configuration" tabindex="-1">Pipeline-Level Configuration <a class="header-anchor" href="#pipeline-level-configuration" aria-label="Permalink to &quot;Pipeline-Level Configuration&quot;">​</a></h3><p>Global pipeline settings control:</p><ul><li>Default step configurations</li><li>Environment-specific profiles</li><li>Monitoring and observability</li><li>Resource allocation</li></ul><h2 id="extension-points" tabindex="-1">Extension Points <a class="header-anchor" href="#extension-points" aria-label="Permalink to &quot;Extension Points&quot;">​</a></h2><h3 id="custom-steps" tabindex="-1">Custom Steps <a class="header-anchor" href="#custom-steps" aria-label="Permalink to &quot;Custom Steps&quot;">​</a></h3><p>Developers can create custom step implementations by extending the provided interfaces.</p><h3 id="custom-mappers" tabindex="-1">Custom Mappers <a class="header-anchor" href="#custom-mappers" aria-label="Permalink to &quot;Custom Mappers&quot;">​</a></h3><p>Mapper interfaces can be implemented to handle specific conversion requirements.</p><h3 id="custom-adapters" tabindex="-1">Custom Adapters <a class="header-anchor" href="#custom-adapters" aria-label="Permalink to &quot;Custom Adapters&quot;">​</a></h3><p>Additional adapters can be created for new protocols or integration patterns.</p><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="step-design" tabindex="-1">Step Design <a class="header-anchor" href="#step-design" aria-label="Permalink to &quot;Step Design&quot;">​</a></h3><ul><li>Keep steps focused on a single responsibility</li><li>Design steps to be stateless when possible</li><li>Handle errors gracefully with appropriate recovery mechanisms</li></ul><h3 id="performance-optimization" tabindex="-1">Performance Optimization <a class="header-anchor" href="#performance-optimization" aria-label="Permalink to &quot;Performance Optimization&quot;">​</a></h3><ul><li>Use virtual threads for I/O-bound operations</li><li>Configure appropriate concurrency levels</li><li>Implement efficient mapper implementations</li></ul><h3 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h3><ul><li>Test steps in isolation</li><li>Use the framework&#39;s testing utilities</li><li>Validate mapper correctness</li><li>Simulate various error conditions</li></ul>`,33))])}const E=d(m,[["render",h]]);export{C as __pageData,E as default};
